using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Reflection;
using System.IO;
using System.IO.Compression;
using System.Windows.Forms;
using System.Net;
using System.Diagnostics; 

namespace WeAreDevs_Bootstrapper
{
    internal class Program
    {
        static void Main(string[] args)
        {
            try
            {
                WebClient wc = new WebClient();
                Remove("data.zip");
                wc.DownloadFile("https://hnt8.net/cheats/WeAreDevs.zip", Directory.GetCurrentDirectory() + "\\data.zip");
                Remove("DiscordRPC.dll");
                Remove("DiscordRPC.xml");
                Remove("IScript.dll");
                Remove("Newtonsoft.Json.dll");
                Remove("Siticone.UI.dll");
                Remove("WeAreDevs.exe");
                Remove("WeAreDevs.exe.config");
                Remove("WeAreDevs_API-cpp.dll");
                Remove("Scripts\\Credits.txt");
                Remove("Bin\\base.txt");
                Remove("Bin\\classfunc.txt");
                Remove("Bin\\debug.log");
                Remove("Bin\\globalf.txt");
                Remove("Bin\\globalns.txt");
                Remove("Bin\\globalv.txt");
                Remove("Bin\\Monaco.html");
                Remove("Bin\\Settings.bin");
                Remove("Bin\\vs\\loader.js");
                Remove("Bin\\vs\\base\\worker\\workerMain.js");
                Remove("Bin\\vs\\basic-languages\\bat\\bat.js");
                Remove("Bin\\vs\\basic-languages\\coffee\\coffee.js");
                Remove("Bin\\vs\\basic-languages\\cpp\\cpp.js");
                Remove("Bin\\vs\\basic-languages\\csharp\\csharp.js");
                Remove("Bin\\vs\\basic-languages\\csp\\csp.js");
                Remove("Bin\\vs\\basic-languages\\css\\css.js");
                Remove("Bin\\vs\\basic-languages\\dockerfile\\dockerfile.js");
                Remove("Bin\\vs\\basic-languages\\fsharp\\fsharp.js");
                Remove("Bin\\vs\\basic-languages\\go\\go.js");
                Remove("Bin\\vs\\basic-languages\\handlebars\\handlebars.js");
                Remove("Bin\\vs\\basic-languages\\html\\html.js");
                Remove("Bin\\vs\\basic-languages\\ini\\ini.js");
                Remove("Bin\\vs\\basic-languages\\java\\java.js");
                Remove("Bin\\vs\\basic-languages\\less\\less.js");
                Remove("Bin\\vs\\basic-languages\\lua\\lua.js");
                Remove("Bin\\vs\\basic-languages\\markdown\\markdown.js");
                Remove("Bin\\vs\\basic-languages\\msdax\\msdax.js");
                Remove("Bin\\vs\\basic-languages\\mysql\\mysql.js");
                Remove("Bin\\vs\\basic-languages\\objective-c\\objective-c.js");
                Remove("Bin\\vs\\basic-languages\\pgsql\\pgsql.js");
                Remove("Bin\\vs\\basic-languages\\php\\php.js");
                Remove("Bin\\vs\\basic-languages\\postiats\\postiats.js");
                Remove("Bin\\vs\\basic-languages\\powershell\\powershell.js");
                Remove("Bin\\vs\\basic-languages\\pug\\pug.js");
                Remove("Bin\\vs\\basic-languages\\python\\python.js");
                Remove("Bin\\vs\\basic-languages\\r\\r.js");
                Remove("Bin\\vs\\basic-languages\\razor\\razor.js");
                Remove("Bin\\vs\\basic-languages\\redis\\redis.js");
                Remove("Bin\\vs\\basic-languages\\redshift\\redshift.js");
                Remove("Bin\\vs\\basic-languages\\ruby\\ruby.js");
                Remove("Bin\\vs\\basic-languages\\rust\\rust.js");
                Remove("Bin\\vs\\basic-languages\\sb\\sb.js");
                Remove("Bin\\vs\\basic-languages\\scss\\scss.js");
                Remove("Bin\\vs\\basic-languages\\solidity\\solidity.js");
                Remove("Bin\\vs\\basic-languages\\sql\\sql.js");
                Remove("Bin\\vs\\basic-languages\\st\\st.js");
                Remove("Bin\\vs\\basic-languages\\swift\\swift.js");
                Remove("Bin\\vs\\basic-languages\\vb\\vb.js");
                Remove("Bin\\vs\\basic-languages\\xml\\xml.js");
                Remove("Bin\\vs\\basic-languages\\yaml\\yaml.js");
                Remove("Bin\\vs\\editor\\editor.main.css");
                Remove("Bin\\vs\\editor\\editor.main.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.de.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.es.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.fr.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.it.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.ja.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.ko.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.ru.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.zh-cn.js");
                Remove("Bin\\vs\\editor\\editor.main.nls.zh-tw.js");
                Remove("Bin\\vs\\editor\\contrib\\suggest\\media\\String_16x.svg");
                Remove("Bin\\vs\\editor\\contrib\\suggest\\media\\String_inverse_16x.svg");
                Remove("Bin\\vs\\editor\\standalone\\browser\\quickOpen\\symbol-sprite.svg");
                Remove("Bin\\vs\\language\\css\\cssMode.js");
                Remove("Bin\\vs\\language\\css\\cssWorker.js");
                Remove("Bin\\vs\\language\\html\\htmlMode.js");
                Remove("Bin\\vs\\language\\html\\htmlWorker.js");
                Remove("Bin\\vs\\language\\json\\jsonMode.js");
                Remove("Bin\\vs\\language\\json\\jsonWorker.js");
                Remove("Bin\\vs\\language\\typescript\\tsMode.js");
                Remove("Bin\\vs\\language\\typescript\\tsWorker.js");
                Remove("Bin\\vs\\language\\typescript\\lib\\typescriptServices.js");
                ZipFile.ExtractToDirectory(Directory.GetCurrentDirectory() + "\\data.zip", Directory.GetCurrentDirectory());
                Remove("data.zip");
                Process.Start(Directory.GetCurrentDirectory() + "\\WeAreDevs.exe", "hnt8");
            } catch (Exception ex)
            {
                MessageBox.Show("An error occured while attempting to load bootstrapper data.\n\n" + ex.Message, "WeAreDevs Bootstrapper - Error");
                Environment.Exit(1);
            }

        }

        static void Remove(string fs, bool d = false)
        {
            try
            {
                if (d)
                {
                    Directory.Delete(Directory.GetCurrentDirectory() + "\\" + fs);
                } else
                {
                    File.Delete(Directory.GetCurrentDirectory() + "\\" + fs);
                }
            }
            catch { }
        }
    }
}
